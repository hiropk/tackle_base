<section class="bg-gray-100">
  <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
    <div class="px-4 py-6 sm:px-0">
      <div class="flex justify-between items-center mb-8">
        <h1 class="text-3xl font-bold text-gray-900">ダッシュボード</h1>
        <%= link_to "メール送信", admin_mail_path, class: "inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
      </div>

      <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
        <!-- ユーザー統計 -->
        <div class="mb-3 bg-white overflow-hidden shadow rounded-lg">
          <div class="px-4 py-5 sm:p-6">
            <dl>
              <dt class="text-lg font-medium text-gray-500 truncate">
                総ユーザー数
              </dt>
              <dd class="mt-1 text-3xl font-semibold text-gray-900">
                <%= @total_users %>
              </dd>
            </dl>
          </div>
        </div>

        <div class="mb-3 bg-white overflow-hidden shadow rounded-lg">
          <div class="px-4 py-5 sm:p-6">
            <dl>
              <dt class="text-lg font-medium text-gray-500 truncate">
                アクティブユーザー数
              </dt>
              <dd class="mt-1 text-3xl font-semibold text-gray-900">
                <%= @total_active_users %>
              </dd>
              <div class="mt-4">
                <h4 class="text-sm font-medium text-gray-500 mb-2">居住地別内訳</h4>
                <div class="space-y-1">
                  <% @residence_stats.each do |residence_code, count| %>
                    <div class="flex justify-between text-sm">
                      <span class="text-gray-600">
                        <%= t("activerecord.attributes.profile.residence_values.#{residence_code}") %>
                      </span>
                      <span class="text-gray-900 font-medium"><%= count %>人</span>
                    </div>
                  <% end %>
                </div>
              </div>

              <div class="mt-4">
                <h4 class="text-sm font-medium text-gray-500 mb-2">釣行エリア別内訳</h4>
                <div class="space-y-1">
                  <% @fishing_area_stats.each do |area_code, count| %>
                    <div class="flex justify-between text-sm">
                      <span class="text-gray-600">
                        <%= t("activerecord.attributes.profile.fishing_areas_values.#{Profile::FISHING_AREAS[area_code]}") %>
                      </span>
                      <span class="text-gray-900 font-medium"><%= count %>人</span>
                    </div>
                  <% end %>
                </div>
              </div>

              <div class="mt-4">
                <h4 class="text-sm font-medium text-gray-500 mb-2">興味のある釣り別内訳</h4>
                <div class="space-y-1">
                  <% @interest_fishing_stats.each do |fishing_code, count| %>
                    <div class="flex justify-between text-sm">
                      <span class="text-gray-600">
                        <%= t("activerecord.attributes.profile.interest_fishings_values.#{Profile::INTEREST_FISHING_TYPES[fishing_code]}") %>
                      </span>
                      <span class="text-gray-900 font-medium"><%= count %>人</span>
                    </div>
                  <% end %>
                </div>
              </div>
            </dl>
          </div>
        </div>

        <div class="mb-3 bg-white overflow-hidden shadow rounded-lg">
          <div class="px-4 py-5 sm:p-6">
            <dl>
              <dt class="text-lg font-medium text-gray-500 truncate">
                退会ユーザー数
              </dt>
              <dd class="mt-1 text-3xl font-semibold text-gray-900">
                <%= @total_deleted_users %>
              </dd>
            </dl>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
